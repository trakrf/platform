# =============================================================================
# ⚠️  SECURITY: This is a TEMPLATE - Replace all placeholder values
# Copy actual credentials from ../trakrf-web/.env.local
# NEVER commit .env.local to git (it's in .gitignore)
# =============================================================================

# -----------------------------------------------------------------------------
# MQTT Configuration (EMQX Cloud)
# -----------------------------------------------------------------------------
# MQTT protocol (mqtts for TLS)
MQTT_PROTO=mqtts

# EMQX Cloud hostname
MQTT_HOST=your-emqx-cloud-host.emqxsl.com

# EMQX Cloud port (8883 for TLS)
MQTT_PORT=8883

# MQTT username
MQTT_USER=your_mqtt_username

# MQTT password
MQTT_PASS=your_mqtt_password

# MQTT topic filter (# = wildcard)
MQTT_TOPIC="trakrf.id/#"

# Full MQTT connection URL (used by Redpanda Connect ingester)
# Note: Password must be URL-encoded
MQTT_URL=mqtts://user:your_url_encoded_pass@your-host.emqxsl.com:8883

# MQTT client ID (unique identifier for this connection)
MQTT_CLIENT_ID=trakrf-platform-ingester

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# Note: We maintain both POSTGRES_DB+POSTGRES_PASSWORD and PG_URL for different purposes:
# - POSTGRES_DB/POSTGRES_PASSWORD: Used directly by TimescaleDB container
#   Raw password with special characters (e.g., #) - no URL encoding needed
# - PG_URL: Complete connection string used by backend application
#   Password must be URL-encoded (# becomes %23) for proper URI parsing
#
# Three deployment modes:
# - PG_URL: Container-to-container (docker-compose via timescaledb hostname)
# - PG_URL_LOCAL: Host-to-container (local dev with `just backend dev`)
# - PG_URL_CLOUD: Host-to-cloud (production testing)
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=postgres
PG_URL=postgres://postgres:your_url_encoded_password@timescaledb:5432/postgres?sslmode=disable&options=-c%20search_path%3Dtrakrf,public
PG_URL_LOCAL=postgres://postgres:your_url_encoded_password@localhost:5432/postgres?sslmode=disable&options=-c%20search_path%3Dtrakrf,public

# -----------------------------------------------------------------------------
# Backend: MQTT (EMQX Cloud - copy from ../trakrf-web/.env.local)
# -----------------------------------------------------------------------------
# MQTT protocol (mqtts for TLS)
MQTT_PROTO=mqtts

# EMQX Cloud hostname
MQTT_HOST=your-emqx-cloud-host.emqxsl.com

# EMQX Cloud port (8883 for TLS)
MQTT_PORT=8883

# MQTT username
MQTT_USER=your_mqtt_username

# MQTT password
MQTT_PASS=your_mqtt_password

# MQTT topic filter (# = wildcard)
MQTT_TOPIC=your_topic/#

# Full MQTT connection URL (used by Redpanda Connect ingester)
# Note: Password must be URL-encoded
MQTT_URL=mqtts://your_user:your_url_encoded_pass@your-host.emqxsl.com:8883

# MQTT client ID (unique identifier for this connection)
MQTT_CLIENT_ID=trakrf-platform-local

# -----------------------------------------------------------------------------
# Backend: Cloud DB (optional - for production cloud connection)
# -----------------------------------------------------------------------------
# Timescale Cloud connection URL (copy from ../trakrf-web/.env.local if using)
PG_URL_CLOUD=postgres://user:password@your-cloud-host.tsdb.cloud.timescale.com:12345/tsdb?sslmode=require&options=-c%20search_path%3Dtrakrf,public

# Preview Environment DB (Timescale Cloud - trakrf-preview service)
# Used for testing against Railway preview environment database
# Get actual credentials from secure source (not committed to git)
PG_URL_PREVIEW=postgres://tsdbadmin:your_preview_password@your-preview-host.tsdb.cloud.timescale.com:34826/tsdb?sslmode=require

# -----------------------------------------------------------------------------
# Backend Service
# -----------------------------------------------------------------------------
# HTTP server port
BACKEND_PORT=8080

# Backend log level (debug, info, warn, error)
BACKEND_LOG_LEVEL=info

# Email Configuration (Resend - for password reset emails)
# Get your API key from https://resend.com/api-keys
RESEND_API_KEY=re_your_api_key_here

# -----------------------------------------------------------------------------
# Frontend: VITE_* vars (exposed to browser)
# -----------------------------------------------------------------------------
# Backend API URL (optional, defaults to /api/v1)
# For development with backend on different host/port:
# VITE_API_URL=http://localhost:8080/api/v1
# For production, leave unset to use relative path /api/v1

# Application name
VITE_APP_NAME="TrakRF Platform"

# Application version for metadata
VITE_APP_VERSION=1.0.0

# Log level (fatal, error, warn, info, debug, trace, silly)
VITE_LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Frontend: RFID Configuration
# -----------------------------------------------------------------------------
# Default RF Power (dBm) - can be overridden in settings
VITE_DEFAULT_RF_POWER=30.0

# Default Session (0-3) - can be overridden in settings
VITE_DEFAULT_SESSION=1

# Connection timeout in milliseconds
VITE_CONNECTION_TIMEOUT=10000

# Inventory scan timeout in milliseconds
VITE_INVENTORY_TIMEOUT=30000

# -----------------------------------------------------------------------------
# Frontend: Development Settings
# -----------------------------------------------------------------------------
# Enable debug features in development
VITE_ENABLE_DEBUG_PANEL=true

# Mock device for development (when no real CS108 available)
VITE_MOCK_DEVICE=false

# Enable BLE mock mode (true = no hardware needed)
VITE_BLE_MOCK_ENABLED=true

# Enable performance monitoring
VITE_ENABLE_PERFORMANCE_MONITORING=false

# -----------------------------------------------------------------------------
# Frontend: Environment Identification
# -----------------------------------------------------------------------------
# Environment indicator shown in UI banner and page title
# Values: dev, staging, prod (or empty)
# - dev: Orange banner, [DEV] title prefix
# - staging: Purple banner, [STG] title prefix
# - prod or empty: No banner (clean production UI)
# VITE_ENVIRONMENT=dev

# -----------------------------------------------------------------------------
# Frontend: Feature Flags
# -----------------------------------------------------------------------------
# Enable barcode scanning features
VITE_ENABLE_BARCODE=true

# Enable locate features
VITE_ENABLE_TAG_SEARCH=true

# Enable reconciliation features
VITE_ENABLE_RECONCILIATION=true

# Enable dark mode by default
VITE_DEFAULT_DARK_MODE=true

# -----------------------------------------------------------------------------
# Frontend: BLE Bridge Configuration (ble-mcp-test)
# -----------------------------------------------------------------------------
# Bridge server host (adjust to your bridge server IP for E2E tests)
BLE_MCP_HOST=localhost

# Bridge server WebSocket port
BLE_MCP_WS_PORT=8080

# Bridge server HTTP/MCP port
BLE_MCP_HTTP_PORT=8081

# Optional auth token for bridge HTTP API
BLE_MCP_HTTP_TOKEN=

# Bridge server log level
BLE_MCP_LOG_LEVEL=info

# CS108 Device name filter
BLE_DEVICE_NAME=CS108

# Optional: Override auto-generated session ID
# BLE_SESSION_ID=my-custom-session

# Note: The bridge URL is built automatically from components:
# WebSocket URL = ws://${BLE_MCP_HOST}:${BLE_MCP_WS_PORT}

# -----------------------------------------------------------------------------
# Frontend: OpenReplay Session Replay (optional)
# -----------------------------------------------------------------------------
# Enable OpenReplay session recording
VITE_OPENREPLAY_ENABLED=false

# OpenReplay project key (get from OpenReplay dashboard at app.openreplay.com)
# VITE_OPENREPLAY_PROJECT_KEY=your_project_key_here

# OpenReplay ingest endpoint (only needed for self-hosted, not for cloud version)
# VITE_OPENREPLAY_INGEST_POINT=https://openreplay.your-domain.com/ingest

# Allow insecure mode for local development (only set to true for localhost)
# VITE_OPENREPLAY_INSECURE=false

# -----------------------------------------------------------------------------
# Frontend: E2E Testing Timeouts (milliseconds)
# -----------------------------------------------------------------------------
BRIDGE_CONNECT_TIMEOUT=5000
BRIDGE_COMMAND_TIMEOUT=2000
BRIDGE_UI_TIMEOUT=3000
BRIDGE_SCAN_TIMEOUT=10000

# -----------------------------------------------------------------------------
# GitHub Integration (optional)
# -----------------------------------------------------------------------------
# GitHub token for PR and push activity
# GH_TOKEN=ghp_xxxxxxxxxxxxxxxxxxxx
