# Ingester Task Runner (MQTT â†’ Database)
set dotenv-load := true
set fallback := true

# List all available commands
default:
    @just --list

# Start ingester (MQTT â†’ identifier_scans table)
up:
    @echo "ğŸ”„ Starting ingester (MQTT â†’ database)..."
    docker compose up -d ingester
    @echo "âœ… Ingester started - streaming MQTT data to identifier_scans table"

# Stop ingester
down:
    @echo "ğŸ›‘ Stopping ingester..."
    docker compose stop ingester

# Restart ingester
restart:
    @just down
    @just up

# Show ingester logs
logs:
    docker compose logs -f ingester

# Rebuild and restart ingester
rebuild:
    @echo "ğŸ”¨ Rebuilding ingester..."
    docker compose build ingester
    @just restart

# Show ingester status
status:
    @docker compose ps ingester
